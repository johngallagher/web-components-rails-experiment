require 'json'
require 'open-uri'
require 'active_support/core_ext/hash/keys'
require 'active_support/inflector/methods'

module Components
  class AcVehicleSearch
    attr_reader :vehicles, :makes, :models, :count, :search_types, :title, :total_number_of_pages, :current_page, :current_options

    def initialize(params:)
      #before_search = Time.now
      url = "http://www.arnoldclark.com/used-cars/search.json?search_type=#{params[:search_type]}&make=#{params[:make]}&model=#{params[:model]}&page=#{params[:page].to_i}"
      response = JSON.parse(open(url).read)
      #response = JSON.parse(dummy_json)
      #after_search = Time.now
      #Rails.logger.debug("Time to search #{(after_search - before_search) * 1000}")

      @vehicles = response["searchResults"].map { |result| OpenStruct.new(result) }
      @makes = response["searchCriteria"]["availableOptions"]["makes"]
      @models = response["searchCriteria"]["availableOptions"]["models"]
      @count = response["count"]
      @search_types = response["searchCriteria"]["availableOptions"]["searchTypes"]
      @title = response["title"]
      @total_number_of_pages = response["pagination"]["totalNumberOfPages"]
      @current_page = response["pagination"]["currentPage"].to_i
      @current_options = response["searchCriteria"]["currentOptions"].symbolize_keys
    end

    def state
      @current_options
    end

    def dummy_json

      %Q{
      {"title":"465 Vans for sale","searchUrl":"/used-cars/search","virtualPagePath":"/used-cars/options?body_type%5b%5d=\u0026colour%5b%5d=\u0026doors%5b%5d=\u0026payment_type=cash\u0026photos_only=false\u0026search_type=vans\u0026seats%5b%5d=\u0026sort_order=price_up\u0026unreserved_only=false","branchName":null,"count":465,"searchResults":[{"stockReference":"ARNFA-U-6041","url":"/used-cars/vauxhall/corsa/1-3-cdti-16v-van/2010/ref/arnfa-u-6041","enquiryUrl":"/contact-us/vehicle-enquiry/ARNFA-U-6041","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2010 (59) Vauxhall Corsa","variant":"1.3 CDTi 16V Van"},"photo":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/350/Vauxhall_logo.png"},"thumbnail":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/196/Vauxhall_logo.png"},"imageCount":0,"branch":{"name":"Perth Citroën / DS","url":"/find-a-dealer/perth-citroen-ds/ref/arnfa","distance":null},"make":"Vauxhall","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":3488,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["52872","mileage"],["Diesel","fuel-type"],["Van","body-type"],["62.8 MPG","mpg"],["White","colour"]],"experimentSummary":[["52872","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["62.8 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null,"promotion":{"type":"valuerange","title":"Part of Arnold's Value Range","url":"/value-range"}}},{"stockReference":"ARNFI-U-1991","url":"/used-cars/renault/kangoo/ml19dci-70-van/2011/ref/arnfi-u-1991","enquiryUrl":"/contact-us/vehicle-enquiry/ARNFI-U-1991","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2011 (11) Renault Kangoo","variant":"ML19dCi 70 Van"},"photo":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/350/Renault_logo.png"},"thumbnail":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/196/Renault_logo.png"},"imageCount":0,"branch":{"name":"Glasgow Vanstore","url":"/find-a-dealer/glasgow-vanstore/ref/arnfi","distance":null},"make":"Renault","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":3495,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["86638","mileage"],["Diesel","fuel-type"],["Van","body-type"],["53.3 MPG","mpg"],["White","colour"]],"experimentSummary":[["86638","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["53.3 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null,"promotion":{"type":"dealplus","title":"Low Finance For You","url":"/deal-plus"}}},{"stockReference":"ARNDB-U-10009","url":"/used-cars/fiat/doblo/1-3-multijet-16v-sx-van/2012/ref/arndb-u-10009","enquiryUrl":"/contact-us/vehicle-enquiry/ARNDB-U-10009","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2012 (62) Fiat Doblo","variant":"1.3 Multijet 16V SX Van"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AKRRNVD2B6-LUS1/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AKRRNVD2B6-LUS1/196/f/"},"imageCount":12,"branch":{"name":"Ayr Fiat / Abarth","url":"/find-a-dealer/ayr-fiat-abarth/ref/arndb","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":3788,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["82968","mileage"],["Diesel","fuel-type"],["Panel Van","body-type"],["56.5 MPG","mpg"],["Silver","colour"]],"experimentSummary":[["82968","mileage"],["Panel Van","body-type"],["Road Tax £230","roadtax"],["56.5 MPG","mpg"],["Diesel","fuel-type"],["Silver","colour"]],"highlightedFeature":null}},{"stockReference":"ARNDH-U-26879","url":"/used-cars/ford/transit-connect/low-roof-van-l-tdci-75ps/2009/ref/arndh-u-26879","enquiryUrl":"/contact-us/vehicle-enquiry/ARNDH-U-26879","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2009 (09/59) Ford Transit Connect","variant":"Low Roof Van L TDCi 75ps"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AGRPNZD9H5-FUL2/350/r/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AGRPNZD9H5-FUL2/196/r/"},"imageCount":6,"branch":{"name":"Penrith Ford","url":"/find-a-dealer/penrith-ford/ref/arndh","distance":null},"make":"Ford","salesInfo":{"pricing":{"cashPrice":3988,"cashPricePrefix":"Only"},"summary":[["Road Tax £235","roadtax"],["77603","mileage"],["Diesel","fuel-type"],["Panel Van","body-type"],["White","colour"]],"experimentSummary":[["77603","mileage"],["Panel Van","body-type"],["Road Tax £235","roadtax"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNAOC-U-260789","url":"/used-cars/citroen/nemo/1-3-hdi-lx-non-start-stop/2012/ref/arnaoc-u-260789","enquiryUrl":"/contact-us/vehicle-enquiry/ARNAOC-U-260789","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2012 (62) Citroen Nemo","variant":"1.3 HDi LX [non Start/Stop]"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AYRXNYA2O6CK-S-/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AYRXNYA2O6CK-S-/196/f/"},"imageCount":9,"branch":{"name":"Shiremoor Commercials","url":"/find-a-dealer/shiremoor-commercials/ref/arnaoc","distance":null},"make":"Citroen","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":3988,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["32614","mileage"],["Diesel","fuel-type"],["Van","body-type"],["62.8 MPG","mpg"],["White","colour"]],"experimentSummary":[["32614","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["62.8 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNEA-U-11784","url":"/used-cars/ford/transit-connect/high-roof-van-l-tdci-110ps/2008/ref/arnea-u-11784","enquiryUrl":"/contact-us/vehicle-enquiry/ARNEA-U-11784","isReserved":true,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2008 Ford Transit Connect","variant":"High Roof Van L TDCi 110ps"},"photo":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/350/Ford_logo.png"},"thumbnail":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/196/Ford_logo.png"},"imageCount":0,"branch":{"name":"Aberdeen Fiat / Kia / Jeep / Abarth","url":"/find-a-dealer/aberdeen-fiat-kia-jeep-abarth/ref/arnea","distance":null},"make":"Ford","salesInfo":{"pricing":{"cashPrice":4288,"cashPricePrefix":"Only"},"summary":[["48108","mileage"],["Diesel","fuel-type"],["Van","body-type"],["Grey","colour"]],"experimentSummary":[["48108","mileage"],["Van","body-type"],["Diesel","fuel-type"],["Grey","colour"]],"highlightedFeature":null}},{"stockReference":"ARNGJ-U-9722","url":"/used-cars/vauxhall/corsa/1-3-cdti-16v-95ps-ecoflex-van-start-stop/2014/ref/arngj-u-9722","enquiryUrl":"/contact-us/vehicle-enquiry/ARNGJ-U-9722","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2014 (64) Vauxhall Corsa","variant":"1.3 CDTi 16V 95ps ecoFLEX Van [Start/Stop]"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AHRZNUG4J6-LUM9/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AHRZNUG4J6-LUM9/196/f/"},"imageCount":12,"branch":{"name":"Leeds Motorstore / Fiat / Jeep / Abarth / Alfa ","url":"/find-a-dealer/leeds-motorstore-fiat-jeep-abarth-alfa/ref/arngj","distance":null},"make":"Vauxhall","salesInfo":{"pricing":{"cashPrice":4488,"cashPricePrefix":"Only"},"summary":[["Road Tax £30","roadtax"],["35454","mileage"],["Diesel","fuel-type"],["Van","body-type"],["85.6 MPG","mpg"],["White","colour"]],"experimentSummary":[["35454","mileage"],["Van","body-type"],["Road Tax £30","roadtax"],["85.6 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNGB-U-7822","url":"/used-cars/fiat/doblo/1-3-multijet-active-5dr/2013/ref/arngb-u-7822","enquiryUrl":"/contact-us/vehicle-enquiry/ARNGB-U-7822","isReserved":true,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (63) Fiat Doblo","variant":"1.3 Multijet Active 5dr"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/ADRONAG3B6-LUS7/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/ADRONAG3B6-LUS7/196/f/"},"imageCount":9,"branch":{"name":"Morecambe Vauxhall","url":"/find-a-dealer/morecambe-vauxhall/ref/arngb","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPrice":4488,"cashPricePrefix":"Only"},"summary":[["Road Tax £130","roadtax"],["54262","mileage"],["Diesel","fuel-type"],["Van","body-type"],["54.3 MPG","mpg"],["White","colour"]],"experimentSummary":[["54262","mileage"],["Van","body-type"],["Road Tax £130","roadtax"],["54.3 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null,"promotion":{"type":"dealplus","title":"Low Finance For You","url":"/deal-plus"}}},{"stockReference":"ARNGB-U-7934","url":"/used-cars/fiat/doblo/1-3-multijet-16v-van-start-stop/2013/ref/arngb-u-7934","enquiryUrl":"/contact-us/vehicle-enquiry/ARNGB-U-7934","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (63) Fiat Doblo","variant":"1.3 Multijet 16V Van Start Stop"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AJRFNAG3B6-LUS7/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AJRFNAG3B6-LUS7/196/f/"},"imageCount":9,"branch":{"name":"Morecambe Vauxhall","url":"/find-a-dealer/morecambe-vauxhall/ref/arngb","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":4488,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["48059","mileage"],["Diesel","fuel-type"],["Van","body-type"],["58.9 MPG","mpg"],["White","colour"]],"experimentSummary":[["48059","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["58.9 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null,"promotion":{"type":"dealplus","title":"Low Finance For You","url":"/deal-plus"}}},{"stockReference":"ARNEF-U-13685","url":"/used-cars/fiat/doblo/1-3-multijet-16v-van-start-stop/2013/ref/arnef-u-13685","enquiryUrl":"/contact-us/vehicle-enquiry/ARNEF-U-13685","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (13) Fiat Doblo","variant":"1.3 Multijet 16V Van Start Stop"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/ACRKNOE3F1-LUS1/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/ACRKNOE3F1-LUS1/196/f/"},"imageCount":12,"branch":{"name":"Kilmarnock Peugeot / Toyota ","url":"/find-a-dealer/kilmarnock-peugeot-toyota/ref/arnef","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":4495,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["48357","mileage"],["Diesel","fuel-type"],["Van","body-type"],["58.9 MPG","mpg"],["White","colour"]],"experimentSummary":[["48357","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["58.9 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNFI-U-2033","url":"/used-cars/fiat/fiorino/1-3-16v-multijet-95-van/2013/ref/arnfi-u-2033","enquiryUrl":"/contact-us/vehicle-enquiry/ARNFI-U-2033","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (62/13) Fiat Fiorino","variant":"1.3 16V Multijet 95 Van"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AXRVNSF2I6-MUS2/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AXRVNSF2I6-MUS2/196/f/"},"imageCount":9,"branch":{"name":"Glasgow Vanstore","url":"/find-a-dealer/glasgow-vanstore/ref/arnfi","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":4495,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["30266","mileage"],["Diesel","fuel-type"],["Van","body-type"],["65.7 MPG","mpg"],["White","colour"]],"experimentSummary":[["30266","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["65.7 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNAG-U-22778","url":"/used-cars/fiat/doblo/1-3-multijet-16v-van-start-stop/2014/ref/arnag-u-22778","enquiryUrl":"/contact-us/vehicle-enquiry/ARNAG-U-22778","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":true,"title":{"name":"2014 (14) Fiat Doblo","variant":"1.3 Multijet 16V Van Start Stop"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/ANRNNFA4G1-OUS2/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/ANRNNFA4G1-OUS2/196/f/"},"imageCount":1,"branch":{"name":"Stirling Vauxhall","url":"/find-a-dealer/stirling-vauxhall/ref/arnag","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":4988,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["36369","mileage"],["Diesel","fuel-type"],["Panel Van","body-type"],["58.9 MPG","mpg"],["White","colour"]],"experimentSummary":[["36369","mileage"],["Panel Van","body-type"],["Road Tax £230","roadtax"],["58.9 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNGB-U-7914","url":"/used-cars/fiat/doblo/1-3-multijet-16v-van/2014/ref/arngb-u-7914","enquiryUrl":"/contact-us/vehicle-enquiry/ARNGB-U-7914","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2014 (14) Fiat Doblo","variant":"1.3 Multijet 16V Van"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AGRTNZG4B1-LUS7/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AGRTNZG4B1-LUS7/196/f/"},"imageCount":9,"branch":{"name":"Morecambe Vauxhall","url":"/find-a-dealer/morecambe-vauxhall/ref/arngb","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":4988,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["32000","mileage"],["Diesel","fuel-type"],["Van","body-type"],["56.5 MPG","mpg"],["White","colour"]],"experimentSummary":[["32000","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["56.5 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null,"promotion":{"type":"dealplus","title":"Low Finance For You","url":"/deal-plus"}}},{"stockReference":"ARNHA-U-20898","url":"/used-cars/mini/convertible/1-6-cooper-2dr/2008/ref/arnha-u-20898","enquiryUrl":"/contact-us/vehicle-enquiry/ARNHA-U-20898","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2008 MINI Convertible","variant":"1.6 Cooper 2dr"},"photo":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/350/MINI_logo.png"},"thumbnail":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/196/MINI_logo.png"},"imageCount":0,"branch":{"name":"Edinburgh Sighthill Citroën / DS","url":"/find-a-dealer/edinburgh-sighthill-citroen-ds/ref/arnha","distance":null},"make":"MINI","salesInfo":{"pricing":{"cashPrice":4988,"cashPricePrefix":"Only"},"summary":[["55896","mileage"],["Petrol","fuel-type"],["Van","body-type"],["38.7 MPG","mpg"],["Red","colour"]],"experimentSummary":[["55896","mileage"],["Van","body-type"],["38.7 MPG","mpg"],["Petrol","fuel-type"],["Red","colour"]],"highlightedFeature":null}},{"stockReference":"ARNAE-U-38246","url":"/used-cars/peugeot/partner/850-s-1-6-hdi-90-van/2011/ref/arnae-u-38246","enquiryUrl":"/contact-us/vehicle-enquiry/ARNAE-U-38246","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2011 (11) Peugeot Partner","variant":"850 S 1.6 HDi 90 Van"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/ABRDNYA1E1-VUN3/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/ABRDNYA1E1-VUN3/196/f/"},"imageCount":9,"branch":{"name":"Glasgow Vauxhall (North)","url":"/find-a-dealer/glasgow-vauxhall-north/ref/arnae","distance":null},"make":"Peugeot","salesInfo":{"pricing":{"cashPrice":4988,"cashPricePrefix":"Only"},"summary":[["Road Tax £240","roadtax"],["78491","mileage"],["Diesel","fuel-type"],["Van","body-type"],["48.7 MPG","mpg"],["White","colour"]],"experimentSummary":[["78491","mileage"],["Van","body-type"],["Road Tax £240","roadtax"],["48.7 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNAOC-U-260772","url":"/used-cars/peugeot/partner/850-s-1-6-hdi-92-van/2014/ref/arnaoc-u-260772","enquiryUrl":"/contact-us/vehicle-enquiry/ARNAOC-U-260772","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2014 (14) Peugeot Partner","variant":"850 S 1.6 HDi 92 Van"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AURENDA4O1CB-S-/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AURENDA4O1CB-S-/196/f/"},"imageCount":9,"branch":{"name":"Shiremoor Commercials","url":"/find-a-dealer/shiremoor-commercials/ref/arnaoc","distance":null},"make":"Peugeot","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":4988,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["68675","mileage"],["Diesel","fuel-type"],["Van","body-type"],["53.3 MPG","mpg"],["White","colour"]],"experimentSummary":[["68675","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["53.3 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNEF-U-13684","url":"/used-cars/fiat/doblo/1-3-multijet-16v-van-start-stop/2013/ref/arnef-u-13684","enquiryUrl":"/contact-us/vehicle-enquiry/ARNEF-U-13684","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (63) Fiat Doblo","variant":"1.3 Multijet 16V Van Start Stop"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AVRKNAE3F6-LUS1/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AVRKNAE3F6-LUS1/196/f/"},"imageCount":12,"branch":{"name":"Kilmarnock Peugeot / Toyota ","url":"/find-a-dealer/kilmarnock-peugeot-toyota/ref/arnef","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":4995,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["40186","mileage"],["Diesel","fuel-type"],["Van","body-type"],["58.9 MPG","mpg"],["White","colour"]],"experimentSummary":[["40186","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["58.9 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNFX-U-661947","url":"/used-cars/fiat/doblo/1-3-multijet-16v-van-start-stop/2013/ref/arnfx-u-661947","enquiryUrl":"/contact-us/vehicle-enquiry/ARNFX-U-661947","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (63) Fiat Doblo","variant":"1.3 Multijet 16V Van Start Stop"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AKRHNAF3X6-LUS6/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AKRHNAF3X6-LUS6/196/f/"},"imageCount":9,"branch":{"name":"Birtley Vanstore","url":"/find-a-dealer/birtley-vanstore/ref/arnfxc","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":4995,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["45558","mileage"],["Diesel","fuel-type"],["Panel Van","body-type"],["58.9 MPG","mpg"],["White","colour"]],"experimentSummary":[["45558","mileage"],["Panel Van","body-type"],["Road Tax £230","roadtax"],["58.9 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNBM-U-56456","url":"/used-cars/vauxhall/combo/2300-1-3-cdti-16v-h1-van/2013/ref/arnbm-u-56456","enquiryUrl":"/contact-us/vehicle-enquiry/ARNBM-U-56456","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (13) Vauxhall Combo","variant":"2300 1.3 CDTI 16V H1 Van"},"photo":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/350/Vauxhall_logo.png"},"thumbnail":{"path":"https://d1ek71enupal89.cloudfront.net/images/vehicle_defaults_png/196/Vauxhall_logo.png"},"imageCount":0,"branch":{"name":"Glasgow Vauxhall","url":"/find-a-dealer/glasgow-vauxhall/ref/arnbm","distance":null},"make":"Vauxhall","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":5288,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["25000","mileage"],["Diesel","fuel-type"],["Van","body-type"],["56.5 MPG","mpg"],["White","colour"]],"experimentSummary":[["25000","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["56.5 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNDGC-U-18365","url":"/used-cars/fiat/doblo/1-3-multijet-16v-van-start-stop/2014/ref/arndgc-u-18365","enquiryUrl":"/contact-us/vehicle-enquiry/ARNDGC-U-18365","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2014 (14) Fiat Doblo","variant":"1.3 Multijet 16V Van Start Stop"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/ACRCNFD4G1CM-S-/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/ACRCNFD4G1CM-S-/196/f/"},"imageCount":9,"branch":{"name":"Carlisle Commercials","url":"/find-a-dealer/carlisle-commercials/ref/commercial3","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":5295,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["28317","mileage"],["Diesel","fuel-type"],["Panel Van","body-type"],["58.9 MPG","mpg"],["White","colour"]],"experimentSummary":[["28317","mileage"],["Panel Van","body-type"],["Road Tax £230","roadtax"],["58.9 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNCZ-U-17548","url":"/used-cars/fiat/doblo/1-3-multijet-16v-van-start-stop/2013/ref/arncz-u-17548","enquiryUrl":"/contact-us/vehicle-enquiry/ARNCZ-U-17548","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (63) Fiat Doblo","variant":"1.3 Multijet 16V Van Start Stop"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/ADRZNWC3Z6-KUS1/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/ADRZNWC3Z6-KUS1/196/f/"},"imageCount":9,"branch":{"name":"Bishopbriggs Renault / Dacia","url":"/find-a-dealer/bishopbriggs-renault-dacia/ref/arncz","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":5295,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["23082","mileage"],["Diesel","fuel-type"],["Panel Van","body-type"],["58.9 MPG","mpg"],["White","colour"]],"experimentSummary":[["23082","mileage"],["Panel Van","body-type"],["Road Tax £230","roadtax"],["58.9 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNAU-U-63811","url":"/used-cars/fiat/doblo/1-3-multijet-16v-sx-van-start-stop/2014/ref/arnau-u-63811","enquiryUrl":"/contact-us/vehicle-enquiry/ARNAU-U-63811","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":true,"title":{"name":"2014 (14) Fiat Doblo","variant":"1.3 Multijet 16V SX Van Start Stop"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AXRPNFA4U1-OUS6/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AXRPNFA4U1-OUS6/196/f/"},"imageCount":1,"branch":{"name":"Glasgow Vauxhall (South)","url":"/find-a-dealer/glasgow-vauxhall-south/ref/arnau","distance":null},"make":"Fiat","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":5488,"extras":"+ VAT"},"summary":[["Road Tax £225","roadtax"],["31560","mileage"],["Diesel","fuel-type"],["Panel Van","body-type"],["58.9 MPG","mpg"],["White","colour"]],"experimentSummary":[["31560","mileage"],["Panel Van","body-type"],["Road Tax £225","roadtax"],["58.9 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNCO-U-13060","url":"/used-cars/peugeot/partner/850-s-1-6-hdi-92-van/2013/ref/arnco-u-13060","enquiryUrl":"/contact-us/vehicle-enquiry/ARNCO-U-13060","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (13) Peugeot Partner","variant":"850 S 1.6 HDi 92 Van"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AWRLNEC3O1-AUS1/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AWRLNEC3O1-AUS1/196/f/"},"imageCount":10,"branch":{"name":"Huddersfield Peugeot / Renault / Dacia","url":"/find-a-dealer/huddersfield-peugeot-renault-dacia/ref/arnco","distance":null},"make":"Peugeot","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":5488,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["40014","mileage"],["Diesel","fuel-type"],["Van","body-type"],["53.3 MPG","mpg"],["White","colour"]],"experimentSummary":[["40014","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["53.3 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null,"promotion":{"type":"dealplus","title":"Low Finance For You","url":"/deal-plus"}}},{"stockReference":"ARNDGC-U-18529","url":"/used-cars/citroen/berlingo/1-6-hdi-625kg-enterprise-75ps/2013/ref/arndgc-u-18529","enquiryUrl":"/contact-us/vehicle-enquiry/ARNDGC-U-18529","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2013 (63) Citroen Berlingo","variant":"1.6 HDi 625Kg Enterprise 75ps"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/ARRONYD3G6CN-S-/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/ARRONYD3G6CN-S-/196/f/"},"imageCount":9,"branch":{"name":"Carlisle Commercials","url":"/find-a-dealer/carlisle-commercials/ref/commercial3","distance":null},"make":"Citroen","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":5495,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["51408","mileage"],["Diesel","fuel-type"],["Panel Van","body-type"],["55.4 MPG","mpg"],["White","colour"]],"experimentSummary":[["51408","mileage"],["Panel Van","body-type"],["Road Tax £230","roadtax"],["55.4 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null}},{"stockReference":"ARNCA-U-21596","url":"/used-cars/volkswagen/caddy/1-6-tdi-102ps-van/2012/ref/arnca-u-21596","enquiryUrl":"/contact-us/vehicle-enquiry/ARNCA-U-21596","isReserved":false,"isAvailableSoon":false,"isAwaitingImages":false,"title":{"name":"2012 (62) Volkswagen Caddy","variant":"1.6 TDI 102PS Van"},"photo":{"path":"https://vcache.arnoldclark.com/imageserver/AYRVNUC2A6-BUS2/350/f/"},"thumbnail":{"path":"https://vcache.arnoldclark.com/imageserver/AYRVNUC2A6-BUS2/196/f/"},"imageCount":12,"branch":{"name":"Wigan Renault / Dacia","url":"/find-a-dealer/wigan-renault-dacia/ref/arnca","distance":null},"make":"Volkswagen","salesInfo":{"pricing":{"cashPricePrefix":"Only","cashPrice":5495,"extras":"+ VAT"},"summary":[["Road Tax £230","roadtax"],["70004","mileage"],["Diesel","fuel-type"],["Van","body-type"],["49.6 MPG","mpg"],["White","colour"]],"experimentSummary":[["70004","mileage"],["Van","body-type"],["Road Tax £230","roadtax"],["49.6 MPG","mpg"],["Diesel","fuel-type"],["White","colour"]],"highlightedFeature":null,"promotion":{"type":"dealplus","title":"Low Finance For You","url":"/deal-plus"}}}],"pagination":{"currentPage":1.0,"totalNumberOfPages":19},"shortlist":{},"searchCriteria":{"availableOptions":{"searchTypes":[["All cars",""],["Used cars","Used Cars"],["New cars","New Cars"],["Nearly new cars","Nearly New Cars"],["Value Range","Value Range"],["Vans","Vans"],["Motability","Motability"],["Deal Plus","Deal Plus"]],"makes":[["All makes",""],["Citroën","Citroen"],["Fiat","Fiat"],["Ford","Ford"],["Isuzu","Isuzu"],["Land Rover","Land Rover"],["MINI","MINI"],["Mercedes-Benz","Mercedes-benz"],["Mitsubishi","Mitsubishi"],["Nissan","Nissan"],["Peugeot","Peugeot"],["Renault","Renault"],["Toyota","Toyota"],["Vauxhall","Vauxhall"],["Volkswagen","Volkswagen"]],"models":[["All models",""]],"distances":[["Any",""],["10 miles","10"],["20 miles","20"],["50 miles","50"],["100 miles","100"],["200 miles","200"]],"bodyTypes":[["Hatchback","Hatchback"],["Estate","Estate"],["Saloon","Saloon"],["SUV","SUV"],["People carrier","People carrier"],["Convertible","Convertible"],["Coupe","Coupe"],["Van","Van"],["Minibus","Minibus"],["Pick-up","Pick-up"],["City car","City car"],["Motorbike","Motorbike"]],"colours":[["White","White"],["Black","Black"],["Blue","Blue"],["Red","Red"],["Grey","Grey"],["Silver","Silver"],["Green","Green"],["Yellow","Yellow"],["Orange","Orange"],["Beige","Beige"],["Purple","Purple"],["Brown","Brown"],["Pink","Pink"],["Maroon","Maroon"],["Cream","Cream"],["Gold","Gold"]],"roadtaxOptions":[["Any",""],["Free","0"],["£20","20"],["£30","30"],["£110","110"],["£135","135"],["£145","145"],["£180","180"],["£290","290"],["Over £290","over290"]],"ageOptions":[["Any",""],["1 year","1"],["2 years","2"],["3 years","3"],["4 years","4"],["5 years","5"],["6 years","6"],["7 years","7"],["Over 7 years","over7"]],"mpgOptions":[["Any",""],["40 MPG +","40"],["50 MPG +","50"],["60 MPG +","60"],["70 MPG +","70"]],"mileageOptions":[["Any",""],["500 miles","500"],["1000 miles","1000"],["5000 miles","5000"],["10,000 miles","10000"],["20,000 miles","20000"],["30,000 miles","30000"],["40,000 miles","40000"],["50,000 miles","50000"],["60,000 miles","60000"],["70,000 miles","70000"],["80,000 miles","80000"],["Over 80,000 miles","over80000"]],"gearboxOptions":[["Any",""],["Manual","Manual"],["Auto","Automatic"],["Semi-auto","Semi-Automatic"]],"fuelTypes":[["Any",""],["Petrol","Petrol"],["Diesel","Diesel"],["Hybrid","Hybrid"],["Electric","Electric"]],"doorsOptions":[["2 doors","2"],["3 doors","3"],["4 doors","4"],["5 doors","5"]],"seatsOptions":[["2 seats","2"],["4 seats","4"],["5 seats","5"],["7 seats","7"]],"sortOrders":[["Price (low to high)","price_up"],["Price (high to low)","price_down"],["Mileage","mileage"]],"minEngineSize":[["No min",""],["1.0 litre","945"],["1.2 litres","1145"],["1.4 litres","1345"],["1.6 litres","1545"],["1.8 litres","1745"],["2.0 litres","1945"],["2.2 litres","2145"],["2.4 litres","2345"],["2.6 litres","2545"],["2.8 litres","2745"],["3.0 litres","2945"]],"maxEngineSize":[["No max",""],["1.0 litre","1044"],["1.2 litres","1244"],["1.4 litres","1444"],["1.6 litres","1644"],["1.8 litres","1844"],["2.0 litres","2044"],["2.2 litres","2244"],["2.4 litres","2444"],["2.6 litres","2644"],["2.8 litres","2844"],["3.0 litres","3044"]],"minPriceOptions":[["No min",""],["£1000","1000"],["£2000","2000"],["£3000","3000"],["£4000","4000"],["£5000","5000"],["£6000","6000"],["£7000","7000"],["£8000","8000"],["£9000","9000"],["£10,000","10000"],["£11,000","11000"],["£12,000","12000"],["£13,000","13000"],["£14,000","14000"],["£15,000","15000"],["£20,000","20000"],["£25,000","25000"],["£30,000","30000"],["£35,000","35000"],["£40,000","40000"],["£50,000","50000"],["£100,000","100000"],["£150,000","150000"]],"maxPriceOptions":[["No max",""],["£1000","1000"],["£2000","2000"],["£3000","3000"],["£4000","4000"],["£5000","5000"],["£6000","6000"],["£7000","7000"],["£8000","8000"],["£9000","9000"],["£10,000","10000"],["£11,000","11000"],["£12,000","12000"],["£13,000","13000"],["£14,000","14000"],["£15,000","15000"],["£20,000","20000"],["£25,000","25000"],["£30,000","30000"],["£35,000","35000"],["£40,000","40000"],["£50,000","50000"],["£100,000","100000"],["£150,000","150000"]]},"currentOptions":{"searchType":"Vans","make":"","model":"","paymentType":"cash","minPrice":"","maxPrice":"","location":"","distance":"","photosOnly":false,"unreservedOnly":false,"keywords":"","bodyType":[""],"fuelType":"","transmission":"","mpg":"","colour":[""],"roadtaxCost":"","mileage":"","doors":[""],"seats":[""],"age":"","minEngineSize":"","maxEngineSize":"","dor":"","branchId":"","branchName":"","sortOrder":"price_up","page":1.0}},"filterRemovalSuggestions":[]}
      }
    end
  end
end

